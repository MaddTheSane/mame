0.106u4
-------


MAMETesters Bugs Fixed
----------------------
atarigt0106u3red [Aaron Giles]
bestmatch0106u3ora [Aaron Giles]
midyunit0106u3red [Aaron Giles]



Source Changes
--------------
Added new function mame_debug_is_active() which can be used by
core code to identify when we are paused in the debugger.
[Aaron Giles]

Fixed crash when passing an invalid driver name on the command line.
Centralized the approximate matching logic into driver.c so other
ports can use it as well. [Aaron Giles]

Now properly extracting path from driver name and adding it to the
rompath so that drag & drop of ZIP files works once again.
[Aaron Giles]

More renderer updates: [Aaron Giles]
 - Fixed feature detection bug that led to false-positive warnings
    when starting up
 - Removed extra vertex padding since some graphics cards could not
    cope with it
 - Added shims to support both Direct3D 9 and Direct3D 8; D3D9 is
    the default, with an automatic fallback to d3d8 if not available
 - New option -d3dversion can be used to specify preferred version
    for testing
 - Added 1 pixel black border around all textures to ensure filtering
    on some cards doesn't result in garbage at the edge of the screen
 - Enabled "do not wait" feature when unthrottled and using D3D9; this
    greatly speeds up unthrottled games, but seems to only work in 
    full screen mode
 - Switched from triangle fans to triangle strips
 - Ensured that render states are only being set minimally
 - Added code to reset the device if lost, allowing application 
    switching out of full screen mode and fixing multi-monitor mode
    with resolution switching

Added new function verbose_printf() which is used instead of checking
the verbose global to print information to the screen. Changed all
locations that were checking the global to use this new function.
[Aaron Giles]



New games added or promoted from NOT_WORKING status
---------------------------------------------------
Card Line [Tomasz Slanina]



0.106u3
-------

WARNING: As of this build, the new rendering system is enabled by
default. The primary focus at this point is compatibility, not
performance. Compared to the old -ddraw system, it will appear
slower when fully unthrottled because there is not a good mechanism
to skip the render if the graphics hardware is still busy like we
used to do. If you have any trouble getting a correct display or
if you get warning messages printed out when starting MAME, please
post about them on http://mametesters.org.

SECONDARY WARNING: The command line and INI parsing code was
rewritten. If you notice any problems with handling of parameters
in either case, please report the bugs on http://mametesters.org.



MAMETesters Bugs Fixed
----------------------
colmns970105gra [Mariusz Wojcieszek]



Source Changes
--------------
Added a size parameter to osd_free_executable(). [Olivier Galibert]

Fixed flash rom writes in dgpix games. [Pierpaolo Prazzoli]

More fixes/improvements to jalmah.c DIP switches: [Roberto Fresca]
 Kakumei:
  - Added flip screen DIP switch.
 Daireika, urashima & mjzoomin:
  - Added flip screen DIP switch.
  - Fixed test/service DIP switch.
  - Fixed complete coinage.
 
Added save state support to the 1942, 1943 and 1945kiii drivers. 
[Lee Mitchell]

Fixed blitters to work with 15-bit direct RGB modes. [Nathan Woods]

Refactored resource tracking code, auto_malloc(), auto_strdup() 
etc into a separate module, restrack.c. [Nathan Woods]

Moved large stack buffers into heap buffers to work better on systems
with small stacks. [Lawrence Gold]

Fixed a subtle auditing issue when both parents and clones had
NO_DUMP ROMs in their manifests. [Hobbes@Play]

Tweaks to the MSVC compiler support: [AtariAce]
 - Removed _MSC_VER specific #pragmas in nec.c
 - Removed _MSC_VER specific #include <malloc.h> in winprefix.h
 - Changed makefile to bootstrap vconv.exe with cl instead of gcc
 - Changed calls to lib to use link /lib instead
 - Updated vconv to only use /arch:SSE2 for VC71 and later
 - Cleaned up the profiler code in winmain.c
 - Removed the direct dependency of MAME on shell32 has been 
 - Tweaked a couple of preprocessor definitions so we compile as far
    back as MSVC 5.0

Massive DIP switch update to the following drivers: actfancr,
aliens, angelkds, argus, asuka, bwing, compgolf, cop01, dblewing,
dec8, dogfgt, dooyong, fuukifg2, homedata, jcross, kaneko16, m92, 
mainevt, megasys1, metro, ms32, nmk16, paradise, seta, seta2, 
shisen, snk, ssv, system1, taito_b, taito_f2, taito_l, tecmo,
thedeep, thepit, ultraman. [Brian Troha, Guru, Yasuhiro Ogawa]

Added code in the debug build to put random data in allocated memory.
[Aaron Giles]

Removed remaining chunks of x86 assembly code, as well as references
to NASM in the makefiles. [Aaron Giles]

Rewrote the options parsing code to be more flexible and generic.
A new core source file options.c provides the ability to add and
maintain a database of key/value pairs, which can be queried at
runtime. Reconnected all existing frontend options through this code. 
Bounds checking on options for the old renderer is pretty loose, and 
several more complicated options have been disconnected as a result. 
If you are still running with the old renderer, be careful.
[Aaron Giles]

Reorganized fronthlp.c to be one step closer to universal. One more
layer of abstraction and hopefully it will be able to move up into
the core. [Aaron Giles]

New options to control multiple screens in the new renderer:
[Aaron Giles]
 -numscreens specifies how many windows to create
 -screen0/screen1/... specifies the name of the screen for each window
 -resolution0/resolution1/... specifies resolution for each window
 -aspect0/aspect1/... specifies aspect ratio for each screen
 -view0/view1/... specifies starting view for each screen

Deprecated osd_skip_this_frame() with the new renderer. osd_update()
now returns TRUE if it wants to skip the following frame. [Aaron Giles]

Fixes to the new rendering system: [Aaron Giles]
 - Enabled new renderer by default
 - Fixed crash at startup due to uninitialized memory
 - Fixed crash at shutdown due to incorrect shutdown order
 - Fixed rendering of 15-bit direct RGB games
 - Fixed weird frameskipping issues
 - Fixed off-by-one error on visible area
 - Added proper clipping of quad primitives
 - Optimized the clearing step to avoid redundant drawing
 - Brought software-only case up to support all major blending types
 - Added support for -filter option
 - Reconnected snapshots, though they are unrotated and screen 0 only
 - Fixed several UI problems with new video options menu
 - More strongly defined the blending modes to produce correct effects
 - Added a flag to indicate textures that are of screen bitmaps



New games added or promoted from NOT_WORKING status
---------------------------------------------------
Mario Lemieux Hockey (Mega-Tech) [David Haywood, Guru]
Highway Chase (Cassette) [David Widel, Juergen Buchmueller]
Critter Crusher [Mariusz Wojcieszek, gbluma]
Daikaiju no Gyakushu [Tomasz Slanina, Guru]



New clones added
----------------
Turtle Ship (North America) [Brian Troha]



0.106u2
-------


IMPORTANT NOTE: The video system in this version has been completely
upended and redesigned. The old video system is still the default;
however, some features may be broken. These are not bug-worthy
reports, as the old system will soon be deprecated. The new system
can be compiled by setting the NEW_RENDER flag on in the makefile.

THE NEW SYSTEM IS STILL WORK-IN-PROGRESS! Apart from video card-
related issues (like it doesn't work on particular hardware or has
an incorrect display), bugs are not being tracked at this time.
There is already a laundry list of things that are broken at the
top of render.c, and there are many other things that still need
to be looked at.

In order to run the new video system with hardware acceleration, 
your machine will require DirectX 8 or later.



MAMETesters Bugs Fixed
----------------------
suchipi0106u1gra [Roberto Fresca]



Source Changes
--------------
Added support for circular buffering in the SHARC core, and fixed
several minor bugs. [Ville Linde]

Added color PROM support for Nintendo's Sheriff driver. 
[Stefan Jokisch]

Discrete sound updates: [Derrick Renaud]
 - Typedef'ed external discrete sound structures to follow current 
     structure use. Statically defined their use in most drivers to 
     stop name pollution.
 - Created new DISCRETE_555_VCO1 module.  This is the 555&Op-amp 
    oscillator circuit used by Borderline.

Added the new video rendering system. A new file render.c contains
the bulk of the logic. Major changes include: [Aaron Giles]
 - The OSD layer is now responsible for allocating one or more 
    render_targets at osd_init time. The old osd_create_display 
    and osd_close_display calls are not used with the new system, 
    so initialization must take place at osd_init time.
 - The old osd_update_video_and_audio call has now been replaced 
    with a simple osd_update call. This update call passes a 
    mame_time to the OSD layer, which is the current emulated time. 
    Throttling and speed calculations should use this time instead
    of the framerate.
 - osd_update is responsible for calling the render system to 
    request a list of primitives to be drawn on each render_target
    for the current frame. The primitives are simple and include
    clipping rectangles, lines, and rectilinear quads only.
 - If it wishes, the OSD layer can call back to a software
    rasterizer in MAME. The rasterizer code is provided as an
    include module so it can be tuned and optimized for platform-
    specific video modes. See windows/rendsoft.c for a usage
    example.
 - There is a new layout file format .lay, which is XML-based and
    which replaces the old .art files. The .lay files describe how
    to render to a render_target. Each layout file can contain
    multiple "views", which describe one of many ways the various
    elements can be drawn. These views can be selected at runtime
    via the new "Video Options" menu.
 - The built-in UI font can be overridden with any .BDF font. Simply
    name the .BDF file "ui.bdf" and place it in the MAME directory.
    If you run at decent resolutions, you should choose a large 
    point size for this font so that the scaled results look nice.
 - The windows implementation uses Direct3D 8 as the preferred
    mechanism for rendering. By default, it will render at the
    current resolution, rather than switching resolutions as before.
    This can be changed by adding -switchres to the command line.
 - There are still a number of imperfect/incomplete features with
    the new renderer, which is why it is not on by default. An
    incomplete list is given in render.c.



New clones added
----------------
WWF: Wrestlemania (rev 1.20 08/02/95) [Corrado Tomaselli]
Heavy Smash (Asia version -4) [Corrado Tomaselli]
Mad Alien (Highway Chase) [Stefan Jokisch]



New games marked as GAME_NOT_WORKING
------------------------------------
Pasha Pasha 2 [Pierpaolo Prazzoli]
Trivia Madness [Pierpaolo Prazzoli]



0.106u1
-------

IMPORTANT NOTE: Major video-related changes are beginning in the
system. Attempts will be made to keep the existing video code
working to a large degree, but some features may be broken or
working improperly until the video changes are complete. Most
notably, in this release, RGB effects are broken for non-Direct3D
blitting. For the moment, do not report anomalies or problems in 
the video system. If you like a nice, stable MAME, please stick 
with the 0.106 release. You have been warned.



MAMETesters Bugs Fixed
----------------------
gladiatr0105u4gra [Don Maeby]



Source Changes
--------------
Updates to the taito_x driver: [AWJ]
 - fixed sound problems in twinhawk
 - fixed a couple of dipswitch mistakes introduced recently
 - added PORT_DIPLOCATIONs for superman and twinhawk

Improved MSVC compiler support: [Nathan Woods]
 - modified vconv to support multiple versions of MSVC based on 
    version info
 - added support for more parameter translations
 - makefile now displays compiling and linking messages when
    building vconv

Converted the Windows blitters to use the DRC engine for 
generation. RGB effects are officially broken with this change.
[Nathan Woods]

Fixed a bug that caused a crash when the -debugscript command line 
option was used with an invalid filename. [Nathan Woods]

Corrected the ordering of the DIP_PORTLOCATION() macros to be
consistent. Multi-bit DIP switches should be specified in LSB-
first order. Added a comment to this effect in inptport.h.
[AWJ, Aaron Giles]

Fixed background color in the Deco cassette games.
[Nicola Salmoria]

Fixed potential crash in the micro3d driver. [MamePlus!]

Improvements to CHD-CD support: [R. Belmont]
 - additional RAW CD sector conversion support, so a game can request 
    e.g. 2048-byte data sectors from a RAW CHD-CD and still get the 
    right data
- reversed CHDMAN error message - now non-RAW CHD-CDs are deprecated
- susume now uses a RAW CHD-CD read directly from an original pressed 
   Konami disc

Some improvements to the Polygonet Commanders driver: [Andrew Gardner]
 - adds change_PC() calls to the dsp56k core
 - removed hacky dsp56k initialization, enabling, and disabling
 - added preliminary implementation of banking hardware tied to the 
    dsp56k in Polygonet Commanders

Fixed MSB accesses and latch reading in the 6840 emulator. [El Condor]

Improved N64 audio output: [R. Belmont]
 - rewrote Audio Interface as a stereo DMADAC (which it actually is), 
    greatly simplifying the code along the way
 - fixed AI interrupt semantics

Changed a number of games that were incorrectly using IPT_LIGHTGUN
to use IPT_AD_STICK instead. [Aaron Giles]

Some preparations for proper multiple screen support. The 
visible_area and refresh_rate values in the Machine structure are
now defined as arrays (1 per screen). The machine_config structure
has been altered as well, removing the following fields:

   frames_per_second
   aspect_x, aspect_y
   screen_width, screen_height
   default_visible_area
   vblank_duration

These are all stored per-screen in a new screen_config structure. 
[Aaron Giles]

Reorganized the user interface code to better support the new render
system. [Aaron Giles]
